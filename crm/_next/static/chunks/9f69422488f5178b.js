(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59343,e=>{"use strict";async function t(e,a={}){let r="";try{let e=sessionStorage.getItem("offstump_profile")||localStorage.getItem("offstump_profile");e&&(r=JSON.parse(e).cachedToken||"")}catch(e){console.error("Failed to get token from profile cache",e)}if(!r)try{for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if(t&&t.startsWith("sb-")&&t.endsWith("-auth-token")){let e=localStorage.getItem(t);if(e){let t=JSON.parse(e);if(t.access_token){r=t.access_token;break}}}}}catch(e){console.error("Failed to get native supabase token",e)}let s={...a.headers,...r?{Authorization:`Bearer ${r}`}:{}},o=e;if(o.startsWith("/api/analytics/dashboard"))o="/api/admin/crm/dashboard";else if(o.startsWith("/api/")){let e=o.split("/");3===e.length?o=`/api/admin/crm/${e[2]}`:4===e.length&&(o=`/api/admin/crm/${e[2]}?id=${e[3]}`)}return fetch(o,{...a,headers:s})}e.s(["myFetch",()=>t])},71080,e=>{"use strict";var t=e.i(43667),a=e.i(92532),r=e.i(59343);function s(){let[e,s]=(0,a.useState)({name:"",phone:""}),[o,l]=(0,a.useState)(!1),n=async t=>{t.preventDefault(),l(!0);try{let t=await (0,r.myFetch)("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(alert("Customer created with ID: "+a.id),s({name:"",phone:""})):alert("Error: "+a.error)}catch(e){console.error(e),alert("Something went wrong")}finally{l(!1)}};return(0,t.jsxs)("form",{onSubmit:n,className:"flex flex-col gap-4 max-w-sm",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Add New Customer"}),(0,t.jsx)("input",{type:"text",required:!0,placeholder:"Customer Name",value:e.name,onChange:t=>s({...e,name:t.target.value}),className:"border p-2 rounded text-black"}),(0,t.jsx)("input",{type:"text",placeholder:"Phone",value:e.phone,onChange:t=>s({...e,phone:t.target.value}),className:"border p-2 rounded text-black"}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700 transition",children:o?"Saving...":"Add Customer"})]})}e.s(["default",()=>s])},27755,e=>{"use strict";var t=e.i(43667),a=e.i(92532),r=e.i(59343);function s(){let[e,s]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(0,r.myFetch)("/api/customers").then(e=>e.json()).then(e=>{e.error?console.error(e.error):s(e),l(!1)}).catch(e=>{console.error(e),l(!1)})},[]),o)?(0,t.jsx)("p",{children:"Loading customers..."}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Customer List"}),0===e.length?(0,t.jsx)("p",{children:"No customers found."}):(0,t.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("li",{className:"p-3 border rounded shadow-sm flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold",children:e.name}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:e.phone||"No phone provided"})]},e.id))})]})}e.s(["default",()=>s])}]);